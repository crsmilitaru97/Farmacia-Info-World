<h1 id="tableLabel">Comenzi</h1>

<p *ngIf="!comz"><em>Loading...</em></p>

<div class="container py-2" style="padding-left:0px">
  <button class="btn btn-primary" [routerLink]="['/view-comanda']">Adauga comanda</button>
  <button class="btn btn-primary" [routerLink]="['/view-comanda']" style="margin-left:10px">Adauga stoc</button>
</div>

<table class='table table-striped' aria-labelledby="tableLabel" *ngIf="comz">
  <thead>
    <tr>
      <th>Selectat</th>
      <th>Nume Pacient</th>
      <th>Data</th>
      <th>Status</th>
      <th>Actiuni</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let com of comz">
      <tr>
        <td width=1% align="center">
          <input type="checkbox" [checked]="com.selectat" (change)="selectedChanged(com)">
        </td>
        <td>{{ com.numePacient }}</td>
        <td>{{ com.data }}</td>
        <td *ngIf="com.status == 1">Neaprobata</td>
        <td *ngIf="com.status == 2">Aprobata</td>
        <td *ngIf="com.status == 3">Stearsa</td>
        <td>
          <button class="btn btn-secondary btn-sm" *ngIf="com.status == 1" (click)="aprobaClicked(com)">Aproba</button>
          <button class="btn btn-secondary btn-sm" *ngIf="com.status == 1" (click)="modificaClicked(com)" style="margin-left:10px">Modifica</button>
        </td>
        <td>
          <button class="btn btn-secondary btn-sm" (click)="toggleTable(com)">Detalii</button>
        </td>
      </tr>
      <tr *ngIf="com.arataDetalii">
        <td colspan="4">
          <table class='table table-striped' style="width: 100%">
            <thead>
              <tr>
                <th>Denumire</th>
                <th>Forma</th>
                <th>Cantitate</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let medi of com.medicamente">
                <td>{{ medi.denumire }}</td>
                <td>{{ medi.forma }}</td>
                <td>{{ medi.cantitate }}</td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>

<button style="float: right;" class="btn btn-primary" (click)="stergeClicked()">Sterge</button>

